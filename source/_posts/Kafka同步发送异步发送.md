---
title: Kafka的同步和异步发送
date: 2024-03-21 00:19:22
categories:
  - Kafka
tags:
  - 面试题
---

Kafka对于消息的发送，可以支持同步和异步。同步会阻塞，而异步不需要等待阻塞的过程。从本质上来说，Kafka都是采用异步的方式来发送消息到`broker`，但是Kafka并不是每次发送消息都会直接发送到`broker`上，而是把消息放到了一个发送队列中，然后通过一个后台线程不断从队列取出消息进行发送，发送成功会出发callback。Kafka服务端会积累一定量的消息统一组装成一个批量消息发送出去，出发条件是`batch.size`和`linger.ms`